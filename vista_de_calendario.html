<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StreakTracker Pro - Vista de Calendario</title>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fstreaktrac3957back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.9"></script>
  <script type="module" src="https://static.rocket.new/rocket-shot.js?v=0.0.1"></script>
  </head>
<body class="bg-gradient-to-br from-primary-50 via-white to-accent-50 min-h-screen">
    <!-- Background Pattern -->
    <div class="absolute inset-0 opacity-5">
        <svg class="w-full h-full" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <pattern id="flame-pattern" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse">
                    <circle cx="10" cy="10" r="1" fill="currentColor"/>
                </pattern>
            </defs>
            <rect width="100" height="100" fill="url(#flame-pattern)"/>
        </svg>
    </div>

    <!-- Header -->
    <header class="relative z-10 px-4 py-6">
        <div class="max-w-6xl mx-auto">
            <div class="flex items-center justify-between">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-primary to-accent rounded-lg flex items-center justify-center">
                        <span class="text-white text-xl font-bold">ðŸ”¥</span>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-secondary-800">StreakTracker Pro</h1>
                        <p class="text-xs text-secondary-500">Tu racha, tu fuerza</p>
                    </div>
                </div>

                <!-- Navigation -->
                <nav class="hidden md:flex items-center space-x-6">
                    <a href="main_dashboard.html" class="text-secondary-600 hover:text-primary transition-colors">Dashboard</a>
                    <a href="calendar_view.html" class="text-primary font-medium">Calendario</a>
                    <a href="progress_analytics.html" class="text-secondary-600 hover:text-primary transition-colors">Progreso</a>
                    <a href="achievement_center.html" class="text-secondary-600 hover:text-primary transition-colors">Logros</a>
                </nav>

                <!-- Mobile Menu Button -->
                <button id="mobile-menu-btn" class="md:hidden p-2 text-secondary-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="fixed right-0 top-0 h-full w-64 bg-white shadow-elevated">
            <div class="p-4">
                <div class="flex items-center justify-between mb-6">
                    <span class="text-lg font-semibold text-secondary-800">MenÃº</span>
                    <button id="close-mobile-menu" class="p-2 text-secondary-600">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <nav class="space-y-4">
                    <a href="main_dashboard.html" class="block py-2 text-secondary-600 hover:text-primary transition-colors">Dashboard</a>
                    <a href="calendar_view.html" class="block py-2 text-primary font-medium">Calendario</a>
                    <a href="progress_analytics.html" class="block py-2 text-secondary-600 hover:text-primary transition-colors">Progreso</a>
                    <a href="achievement_center.html" class="block py-2 text-secondary-600 hover:text-primary transition-colors">Logros</a>
                    <a href="practice_session_tracker.html" class="block py-2 text-secondary-600 hover:text-primary transition-colors">PrÃ¡ctica</a>
                </nav>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="relative z-10 px-4 pb-8">
        <div class="max-w-6xl mx-auto">
            <!-- Calendar Header -->
            <div class="bg-white rounded-2xl shadow-elevated p-6 mb-6 border border-border-light">
                <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
                    <!-- Current Streak Info -->
                    <div class="flex items-center space-x-4">
                        <div class="w-16 h-16 bg-gradient-to-br from-primary to-accent rounded-full flex items-center justify-center">
                            <span class="text-2xl">ðŸ”¥</span>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold text-secondary-800">Racha Actual</h2>
                            <div class="flex items-center space-x-2">
                                <span class="streak-counter">23</span>
                                <span class="text-secondary-600">dÃ­as consecutivos</span>
                            </div>
                        </div>
                    </div>

                    <!-- Calendar Controls -->
                    <div class="flex items-center space-x-4">
                        <!-- View Toggle -->
                        <div class="flex bg-surface rounded-lg p-1">
                            <button id="month-view-btn" class="px-4 py-2 text-sm font-medium rounded-md bg-white text-primary shadow-sm transition-all">
                                Mes
                            </button>
                            <button id="week-view-btn" class="px-4 py-2 text-sm font-medium rounded-md text-secondary-600 hover:text-secondary-800 transition-all">
                                Semana
                            </button>
                        </div>

                        <!-- Month Navigation -->
                        <div class="flex items-center space-x-2">
                            <button id="prev-month" class="p-2 text-secondary-600 hover:text-primary transition-colors">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                </svg>
                            </button>
                            <h3 id="current-month" class="text-lg font-semibold text-secondary-800 min-w-32 text-center">Noviembre 2025</h3>
                            <button id="next-month" class="p-2 text-secondary-600 hover:text-primary transition-colors">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </button>
                        </div>

                        <!-- Today Button -->
                        <button id="today-btn" class="btn-primary">
                            Hoy
                        </button>
                    </div>
                </div>
            </div>

            <!-- Calendar Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                <!-- Calendar Main View -->
                <div class="lg:col-span-3">
                    <div class="bg-white rounded-2xl shadow-elevated border border-border-light overflow-hidden">
                        <!-- Calendar Header Days -->
                        <div class="grid grid-cols-7 bg-surface border-b border-border">
                            <div class="p-4 text-center text-sm font-medium text-secondary-600">Dom</div>
                            <div class="p-4 text-center text-sm font-medium text-secondary-600">Lun</div>
                            <div class="p-4 text-center text-sm font-medium text-secondary-600">Mar</div>
                            <div class="p-4 text-center text-sm font-medium text-secondary-600">MiÃ©</div>
                            <div class="p-4 text-center text-sm font-medium text-secondary-600">Jue</div>
                            <div class="p-4 text-center text-sm font-medium text-secondary-600">Vie</div>
                            <div class="p-4 text-center text-sm font-medium text-secondary-600">SÃ¡b</div>
                        </div>

                        <!-- Calendar Days Grid -->
                        <div id="calendar-grid" class="grid grid-cols-7">
                            <!-- Week 1 -->
                            <div class="calendar-day other-month" data-date="2025-10-27">
                                <span class="day-number">27</span>
                            </div>
                            <div class="calendar-day other-month" data-date="2025-10-28">
                                <span class="day-number">28</span>
                            </div>
                            <div class="calendar-day other-month" data-date="2025-10-29">
                                <span class="day-number">29</span>
                            </div>
                            <div class="calendar-day other-month" data-date="2025-10-30">
                                <span class="day-number">30</span>
                            </div>
                            <div class="calendar-day other-month" data-date="2025-10-31">
                                <span class="day-number">31</span>
                            </div>
                            <div class="calendar-day practice-day streak-day" data-date="2025-11-01">
                                <span class="day-number">1</span>
                                <div class="flame-indicator">ðŸ”¥</div>
                                <div class="intensity-bar high"></div>
                            </div>
                            <div class="calendar-day practice-day streak-day" data-date="2025-11-02">
                                <span class="day-number">2</span>
                                <div class="flame-indicator">ðŸ”¥</div>
                                <div class="intensity-bar medium"></div>
                            </div>

                            <!-- Week 2 -->
                            <div class="calendar-day today practice-day streak-day" data-date="2025-11-03">
                                <span class="day-number">3</span>
                                <div class="flame-indicator">ðŸ”¥</div>
                                <div class="intensity-bar high"></div>
                                <div class="today-indicator">Hoy</div>
                            </div>
                            <div class="calendar-day" data-date="2025-11-04">
                                <span class="day-number">4</span>
                                <div class="add-session-btn">+</div>
                            </div>
                            <div class="calendar-day" data-date="2025-11-05">
                                <span class="day-number">5</span>
                                <div class="add-session-btn">+</div>
                            </div>
                            <div class="calendar-day" data-date="2025-11-06">
                                <span class="day-number">6</span>
                                <div class="add-session-btn">+</div>
                            </div>
                            <div class="calendar-day" data-date="2025-11-07">
                                <span class="day-number">7</span>
                                <div class="add-session-btn">+</div>
                            </div>
                            <div class="calendar-day" data-date="2025-11-08">
                                <span class="day-number">8</span>
                                <div class="add-session-btn">+</div>
                            </div>
                            <div class="calendar-day" data-date="2025-11-09">
                                <span class="day-number">9</span>
                                <div class="add-session-btn">+</div>
                            </div>

                            <!-- Week 3 -->
                            <div class="calendar-day" data-date="2025-11-10">
                                <span class="day-number">10</span>
                                <div class="add-session-btn">+</div>
                            </div>
                            <div class="calendar-day" data-date="2025-11-11">
                                <span class="day-number">11</span>
                                <div class="add-session-btn">+</div>
                            </div>
                            <div class="calendar-day practice-day" data-date="2025-11-12">
                                <span class="day-number">12</span>
                                <div class="flame-indicator">ðŸ”¥</div>
                                <div class="intensity-bar low"></div>
                            </div>
                            <div class="calendar-day practice-day" data-date="2025-11-13">
                                <span class="day-number">13</span>
                                <div class="flame-indicator">ðŸ”¥</div>
                                <div class="intensity-bar medium"></div>
                            </div>
                            <div class="calendar-day practice-day streak-day" data-date="2025-11-14">
                                <span class="day-number">14</span>
                                <div class="flame-indicator">ðŸ”¥</div>
                                <div class="intensity-bar high"></div>
                            </div>
                            <div class="calendar-day practice-day streak-day" data-date="2025-11-15">
                                <span class="day-number">15</span>
                                <div class="flame-indicator">ðŸ”¥</div>
                                <div class="intensity-bar high"></div>
                            </div>
                            <div class="calendar-day missed-day" data-date="2025-11-16">
                                <span class="day-number">16</span>
                                <div class="missed-indicator">ðŸ’”</div>
                            </div>

                            <!-- Week 4 -->
                            <div class="calendar-day practice-day" data-date="2025-11-17">
                                <span class="day-number">17</span>
                                <div class="flame-indicator">ðŸ”¥</div>
                                <div class="intensity-bar medium"></div>
                            </div>
                            <div class="calendar-day practice-day streak-day" data-date="2025-11-18">
                                <span class="day-number">18</span>
                                <div class="flame-indicator">ðŸ”¥</div>
                                <div class="intensity-bar high"></div>
                            </div>
                            <div class="calendar-day practice-day streak-day" data-date="2025-11-19">
                                <span class="day-number">19</span>
                                <div class="flame-indicator">ðŸ”¥</div>
                                <div class="intensity-bar high"></div>
                            </div>
                            <div class="calendar-day practice-day streak-day" data-date="2025-11-20">
                                <span class="day-number">20</span>
                                <div class="flame-indicator">ðŸ”¥</div>
                                <div class="intensity-bar medium"></div>
                            </div>
                            <div class="calendar-day practice-day streak-day" data-date="2025-11-21">
                                <span class="day-number">21</span>
                                <div class="flame-indicator">ðŸ”¥</div>
                                <div class="intensity-bar high"></div>
                            </div>
                            <div class="calendar-day practice-day streak-day" data-date="2025-11-22">
                                <span class="day-number">22</span>
                                <div class="flame-indicator">ðŸ”¥</div>
                                <div class="intensity-bar high"></div>
                            </div>
                            <div class="calendar-day practice-day streak-day" data-date="2025-11-23">
                                <span class="day-number">23</span>
                                <div class="flame-indicator">ðŸ”¥</div>
                                <div class="intensity-bar medium"></div>
                            </div>

                            <!-- Week 5 -->
                            <div class="calendar-day" data-date="2025-11-24">
                                <span class="day-number">24</span>
                                <div class="add-session-btn">+</div>
                            </div>
                            <div class="calendar-day" data-date="2025-11-25">
                                <span class="day-number">25</span>
                                <div class="add-session-btn">+</div>
                            </div>
                            <div class="calendar-day" data-date="2025-11-26">
                                <span class="day-number">26</span>
                                <div class="add-session-btn">+</div>
                            </div>
                            <div class="calendar-day" data-date="2025-11-27">
                                <span class="day-number">27</span>
                                <div class="add-session-btn">+</div>
                            </div>
                            <div class="calendar-day" data-date="2025-11-28">
                                <span class="day-number">28</span>
                                <div class="add-session-btn">+</div>
                            </div>
                            <div class="calendar-day" data-date="2025-11-29">
                                <span class="day-number">29</span>
                                <div class="add-session-btn">+</div>
                            </div>
                            <div class="calendar-day" data-date="2025-11-30">
                                <span class="day-number">30</span>
                                <div class="add-session-btn">+</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="lg:col-span-1 space-y-6">
                    <!-- Selected Day Details -->
                    <div id="day-details" class="bg-white rounded-2xl shadow-elevated p-6 border border-border-light">
                        <div class="text-center mb-4">
                            <div class="w-12 h-12 bg-gradient-to-br from-primary to-accent rounded-full flex items-center justify-center mx-auto mb-2">
                                <span class="text-xl">ðŸ”¥</span>
                            </div>
                            <h3 class="text-lg font-semibold text-secondary-800">3 de Noviembre</h3>
                            <p class="text-sm text-secondary-600">Hoy</p>
                        </div>

                        <div class="space-y-4">
                            <!-- Session Summary -->
                            <div class="bg-surface rounded-lg p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-medium text-secondary-700">SesiÃ³n de PrÃ¡ctica</span>
                                    <span class="text-xs text-success-600 bg-success-100 px-2 py-1 rounded-full">Completada</span>
                                </div>
                                <div class="space-y-2 text-sm text-secondary-600">
                                    <div class="flex justify-between">
                                        <span>DuraciÃ³n:</span>
                                        <span class="font-medium">45 min</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Preguntas:</span>
                                        <span class="font-medium">25</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Aciertos:</span>
                                        <span class="font-medium text-success-600">22/25</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Quick Actions -->
                            <div class="space-y-2">
                                <button class="w-full btn-primary text-sm py-2">
                                    Ver Detalles
                                </button>
                                <button class="w-full px-4 py-2 border border-border rounded-lg text-secondary-600 hover:bg-surface transition-colors text-sm">
                                    Editar SesiÃ³n
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Streak Stats -->
                    <div class="bg-white rounded-2xl shadow-elevated p-6 border border-border-light">
                        <h3 class="text-lg font-semibold text-secondary-800 mb-4">EstadÃ­sticas de Racha</h3>
                        
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-secondary-600">Racha Actual</span>
                                <span class="streak-counter text-lg">23</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-secondary-600">Mejor Racha</span>
                                <span class="font-mono text-lg font-medium text-accent">45</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-secondary-600">Este Mes</span>
                                <span class="font-mono text-lg font-medium text-secondary-800">12</span>
                            </div>
                        </div>

                        <!-- Progress Bar -->
                        <div class="mt-4">
                            <div class="flex justify-between text-xs text-secondary-600 mb-1">
                                <span>Progreso hacia 30 dÃ­as</span>
                                <span>77%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 77%"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Legend -->
                    <div class="bg-white rounded-2xl shadow-elevated p-6 border border-border-light">
                        <h3 class="text-lg font-semibold text-secondary-800 mb-4">Leyenda</h3>
                        
                        <div class="space-y-3">
                            <div class="flex items-center space-x-3">
                                <div class="w-6 h-6 bg-primary-100 rounded flex items-center justify-center">
                                    <span class="text-xs">ðŸ”¥</span>
                                </div>
                                <span class="text-sm text-secondary-600">PrÃ¡ctica completada</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <div class="w-6 h-6 bg-error-100 rounded flex items-center justify-center">
                                    <span class="text-xs">ðŸ’”</span>
                                </div>
                                <span class="text-sm text-secondary-600">DÃ­a perdido</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <div class="w-6 h-6 bg-surface rounded border-2 border-dashed border-border flex items-center justify-center">
                                    <span class="text-xs text-secondary-400">+</span>
                                </div>
                                <span class="text-sm text-secondary-600">DÃ­a disponible</span>
                            </div>
                        </div>

                        <!-- Intensity Legend -->
                        <div class="mt-4 pt-4 border-t border-border">
                            <h4 class="text-sm font-medium text-secondary-700 mb-2">Intensidad</h4>
                            <div class="space-y-2">
                                <div class="flex items-center space-x-2">
                                    <div class="w-4 h-1 bg-success-300 rounded"></div>
                                    <span class="text-xs text-secondary-600">Baja (< 30 min)</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="w-4 h-1 bg-accent rounded"></div>
                                    <span class="text-xs text-secondary-600">Media (30-60 min)</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="w-4 h-1 bg-primary rounded"></div>
                                    <span class="text-xs text-secondary-600">Alta (> 60 min)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Quick Session Modal -->
    <div id="quick-session-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-2xl p-6 w-full max-w-md">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-gradient-to-br from-primary to-accent rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="text-2xl">ðŸ”¥</span>
                </div>
                <h3 class="text-xl font-bold text-secondary-800 mb-2">Registrar PrÃ¡ctica</h3>
                <p id="modal-date" class="text-secondary-600">4 de Noviembre, 2025</p>
            </div>

            <form id="quick-session-form" class="space-y-4">
                <div>
                    <label for="session-duration" class="block text-sm font-medium text-secondary-700 mb-2">DuraciÃ³n (minutos)</label>
                    <input 
                        type="number" 
                        id="session-duration" 
                        name="duration"
                        placeholder="45"
                        min="1"
                        max="300"
                        class="input-field"
                        required
                    >
                </div>

                <div>
                    <label for="session-questions" class="block text-sm font-medium text-secondary-700 mb-2">Preguntas Respondidas</label>
                    <input 
                        type="number" 
                        id="session-questions" 
                        name="questions"
                        placeholder="25"
                        min="1"
                        class="input-field"
                        required
                    >
                </div>

                <div>
                    <label for="session-correct" class="block text-sm font-medium text-secondary-700 mb-2">Respuestas Correctas</label>
                    <input 
                        type="number" 
                        id="session-correct" 
                        name="correct"
                        placeholder="22"
                        min="0"
                        class="input-field"
                        required
                    >
                </div>

                <div>
                    <label for="session-difficulty" class="block text-sm font-medium text-secondary-700 mb-2">Dificultad</label>
                    <select id="session-difficulty" name="difficulty" class="input-field" required>
                        <option value="">Seleccionar dificultad</option>
                        <option value="easy">FÃ¡cil</option>
                        <option value="medium">Medio</option>
                        <option value="hard">DifÃ­cil</option>
                    </select>
                </div>

                <div class="flex space-x-3 pt-4">
                    <button type="button" id="cancel-session" class="flex-1 px-4 py-3 border border-border rounded-lg text-secondary-600 hover:bg-surface transition-colors">
                        Cancelar
                    </button>
                    <button type="submit" class="flex-1 btn-primary">
                        Guardar SesiÃ³n
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Success Message -->
    <div id="success-message" class="fixed top-4 right-4 bg-success-500 text-white px-6 py-3 rounded-lg shadow-elevated hidden z-50">
        <div class="flex items-center">
            <span class="mr-2">âœ…</span>
            <span id="success-text">SesiÃ³n guardada exitosamente</span>
        </div>
    </div>

    <style>
        .calendar-day {
            @apply relative p-4 min-h-24 border-b border-r border-border hover:bg-surface transition-colors cursor-pointer;
        }

        .calendar-day:nth-child(7n) {
            @apply border-r-0;
        }

        .calendar-day.other-month {
            @apply text-secondary-300 bg-gray-50;
        }

        .calendar-day.today {
            @apply bg-primary-50 border-primary-200;
        }

        .calendar-day.practice-day {
            @apply bg-success-50;
        }

        .calendar-day.streak-day {
            @apply bg-gradient-to-br from-primary-50 to-accent-50;
        }

        .calendar-day.missed-day {
            @apply bg-error-50;
        }

        .day-number {
            @apply text-sm font-medium text-secondary-800;
        }

        .other-month .day-number {
            @apply text-secondary-300;
        }

        .flame-indicator {
            @apply absolute top-1 right-1 text-lg;
        }

        .missed-indicator {
            @apply absolute top-1 right-1 text-sm opacity-60;
        }

        .add-session-btn {
            @apply absolute top-1 right-1 w-6 h-6 bg-border rounded-full flex items-center justify-center text-xs text-secondary-400 hover:bg-primary hover:text-white transition-colors;
        }

        .today-indicator {
            @apply absolute bottom-1 left-1 text-xs font-medium text-primary bg-primary-100 px-2 py-1 rounded-full;
        }

        .intensity-bar {
            @apply absolute bottom-1 right-1 w-8 h-1 rounded-full;
        }

        .intensity-bar.low {
            @apply bg-success-300;
        }

        .intensity-bar.medium {
            @apply bg-accent;
        }

        .intensity-bar.high {
            @apply bg-primary;
        }

        @media (max-width: 768px) {
            .calendar-day {
                @apply min-h-16 p-2;
            }
            
            .flame-indicator {
                @apply text-sm;
            }
        }
    </style>

    <script>
        // Mobile menu functionality
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const closeMobileMenu = document.getElementById('close-mobile-menu');

        mobileMenuBtn.addEventListener('click', () => {
            mobileMenu.classList.remove('hidden');
        });

        closeMobileMenu.addEventListener('click', () => {
            mobileMenu.classList.add('hidden');
        });

        mobileMenu.addEventListener('click', (e) => {
            if (e.target === mobileMenu) {
                mobileMenu.classList.add('hidden');
            }
        });

        // Calendar functionality
        const monthNames = [
            'Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio',
            'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'
        ];

        let currentDate = new Date(2025, 10, 3); // November 3, 2025
        let selectedDate = null;

        // View toggle functionality
        const monthViewBtn = document.getElementById('month-view-btn');
        const weekViewBtn = document.getElementById('week-view-btn');

        monthViewBtn.addEventListener('click', () => {
            monthViewBtn.classList.add('bg-white', 'text-primary', 'shadow-sm');
            monthViewBtn.classList.remove('text-secondary-600');
            weekViewBtn.classList.remove('bg-white', 'text-primary', 'shadow-sm');
            weekViewBtn.classList.add('text-secondary-600');
            // Switch to month view logic would go here
        });

        weekViewBtn.addEventListener('click', () => {
            weekViewBtn.classList.add('bg-white', 'text-primary', 'shadow-sm');
            weekViewBtn.classList.remove('text-secondary-600');
            monthViewBtn.classList.remove('bg-white', 'text-primary', 'shadow-sm');
            monthViewBtn.classList.add('text-secondary-600');
            // Switch to week view logic would go here
        });

        // Month navigation
        const prevMonthBtn = document.getElementById('prev-month');
        const nextMonthBtn = document.getElementById('next-month');
        const currentMonthDisplay = document.getElementById('current-month');
        const todayBtn = document.getElementById('today-btn');

        function updateMonthDisplay() {
            currentMonthDisplay.textContent = `${monthNames[currentDate.getMonth()]} ${currentDate.getFullYear()}`;
        }

        prevMonthBtn.addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() - 1);
            updateMonthDisplay();
            // Regenerate calendar would go here
        });

        nextMonthBtn.addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() + 1);
            updateMonthDisplay();
            // Regenerate calendar would go here
        });

        todayBtn.addEventListener('click', () => {
            currentDate = new Date(2025, 10, 3); // Reset to today
            updateMonthDisplay();
            // Regenerate calendar and highlight today would go here
        });

        // Calendar day interactions
        const calendarDays = document.querySelectorAll('.calendar-day');
        const quickSessionModal = document.getElementById('quick-session-modal');
        const cancelSessionBtn = document.getElementById('cancel-session');
        const quickSessionForm = document.getElementById('quick-session-form');
        const modalDate = document.getElementById('modal-date');

        calendarDays.forEach(day => {
            day.addEventListener('click', (e) => {
                const date = day.getAttribute('data-date');
                const addBtn = day.querySelector('.add-session-btn');
                
                // Remove previous selection
                calendarDays.forEach(d => d.classList.remove('selected'));
                day.classList.add('selected');
                
                selectedDate = date;
                updateDayDetails(date, day);
                
                // If clicking on add button, open modal
                if (e.target.classList.contains('add-session-btn')) {
                    openQuickSessionModal(date);
                }
            });
        });

        function updateDayDetails(dateString, dayElement) {
            const dayDetails = document.getElementById('day-details');
            const date = new Date(dateString);
            const dayName = date.toLocaleDateString('es-ES', { weekday: 'long' });
            const dayNumber = date.getDate();
            const monthName = monthNames[date.getMonth()];
            
            // Update the day details panel based on the selected day
            const title = dayDetails.querySelector('h3');
            const subtitle = dayDetails.querySelector('p');
            
            title.textContent = `${dayNumber} de ${monthName}`;
            
            if (dayElement.classList.contains('today')) {
                subtitle.textContent = 'Hoy';
            } else if (dayElement.classList.contains('practice-day')) {
                subtitle.textContent = 'PrÃ¡ctica completada';
            } else if (dayElement.classList.contains('missed-day')) {
                subtitle.textContent = 'DÃ­a perdido';
            } else {
                subtitle.textContent = dayName;
            }
        }

        function openQuickSessionModal(dateString) {
            const date = new Date(dateString);
            const formattedDate = date.toLocaleDateString('es-ES', { 
                day: 'numeric', 
                month: 'long', 
                year: 'numeric' 
            });
            
            modalDate.textContent = formattedDate;
            quickSessionModal.classList.remove('hidden');
        }

        cancelSessionBtn.addEventListener('click', () => {
            quickSessionModal.classList.add('hidden');
            quickSessionForm.reset();
        });

        quickSessionModal.addEventListener('click', (e) => {
            if (e.target === quickSessionModal) {
                quickSessionModal.classList.add('hidden');
                quickSessionForm.reset();
            }
        });

        // Form submission
        quickSessionForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const formData = new FormData(quickSessionForm);
            const duration = formData.get('duration');
            const questions = formData.get('questions');
            const correct = formData.get('correct');
            const difficulty = formData.get('difficulty');
            
            // Validate that correct answers don't exceed total questions
            if (parseInt(correct) > parseInt(questions)) {
                alert('Las respuestas correctas no pueden ser mÃ¡s que el total de preguntas');
                return;
            }
            
            // Here you would save the session data
            console.log('Session data:', { duration, questions, correct, difficulty, date: selectedDate });
            
            // Show success message
            showSuccessMessage('Â¡SesiÃ³n guardada exitosamente! ðŸ”¥');
            
            // Close modal and reset form
            quickSessionModal.classList.add('hidden');
            quickSessionForm.reset();
            
            // Update the calendar day to show it has a practice session
            const dayElement = document.querySelector(`[data-date="${selectedDate}"]`);
            if (dayElement && !dayElement.classList.contains('practice-day')) {
                dayElement.classList.add('practice-day');
                dayElement.innerHTML = `
                    <span class="day-number">${dayElement.querySelector('.day-number').textContent}</span>
                    <div class="flame-indicator">ðŸ”¥</div>
                    <div class="intensity-bar ${getIntensityClass(duration)}"></div>
                `;
            }
        });

        function getIntensityClass(duration) {
            const dur = parseInt(duration);
            if (dur < 30) return 'low';
            if (dur <= 60) return 'medium';
            return 'high';
        }

        function showSuccessMessage(message) {
            const successMessage = document.getElementById('success-message');
            const successText = document.getElementById('success-text');
            successText.textContent = message;
            successMessage.classList.remove('hidden');
            setTimeout(() => {
                successMessage.classList.add('hidden');
            }, 3000);
        }

        // Real-time validation for session form
        const questionsInput = document.getElementById('session-questions');
        const correctInput = document.getElementById('session-correct');

        questionsInput.addEventListener('input', () => {
            const maxCorrect = parseInt(questionsInput.value) || 0;
            correctInput.setAttribute('max', maxCorrect);
            
            if (parseInt(correctInput.value) > maxCorrect) {
                correctInput.value = maxCorrect;
            }
        });

        correctInput.addEventListener('input', () => {
            const maxCorrect = parseInt(questionsInput.value) || 0;
            const currentCorrect = parseInt(correctInput.value) || 0;
            
            if (currentCorrect > maxCorrect) {
                correctInput.value = maxCorrect;
            }
        });

        // Touch gestures for mobile (basic implementation)
        let touchStartX = 0;
        let touchEndX = 0;

        document.addEventListener('touchstart', e => {
            touchStartX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', e => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            const swipeThreshold = 50;
            const diff = touchStartX - touchEndX;
            
            if (Math.abs(diff) > swipeThreshold) {
                if (diff > 0) {
                    // Swipe left - next month
                    nextMonthBtn.click();
                } else {
                    // Swipe right - previous month
                    prevMonthBtn.click();
                }
            }
        }

        // Initialize
        updateMonthDisplay();
        
        // Select today by default
        const todayElement = document.querySelector('.today');
        if (todayElement) {
            todayElement.click();
        }
    </script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
</body>
</html>